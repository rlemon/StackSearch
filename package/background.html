<script type="text/javascript">
function json_to_array(a){try{return JSON.parse(a)}catch(b){return[]}}function buildURL(a){return"http://api.stackexchange.com/2.0/sites?page="+a+"&pagesize=100&filter="+api_filter+"&callback=run"}function jsonp(a){var b=document.createElement("script");b.src=a;document.documentElement.appendChild(b)}function search_click_handler(a){window.open(ss_site_list[a.menuItemId-1].site_url+"/search?q="+encodeURIComponent(a.selectionText))}
var make_menus=function(){chrome.contextMenus.removeAll(function(){ss_site_list=json_to_array(localStorage.ss_site_list);for(var a=0,b=ss_site_list.length;a<b;a++)chrome.contextMenus.create({title:ss_site_list[a].name,contexts:["selection"],onclick:search_click_handler})})};function run(a){a.items.forEach(function(a){"main_site"==a.site_type&&se_site_list.push(a)});a.has_more?jsonp(buildURL(a.page+1)):make_menus()}var se_site_list=[],ss_site_list=[],api_filter="!LQ*6TuCbGSOkGeoeKZn.dO";jsonp(buildURL(1));
</script>
